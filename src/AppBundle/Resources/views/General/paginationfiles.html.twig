{% if view.pages>1 %}
<ul class="pagination pagination-sm">
    {% set _first = view.page == 1 %}
    {% set _last = view.page == view.pages %}
    {% set m=3 %}
    {% if _first %}
        <li class="disabled"><span>&laquo;</span></li>
    {% else %}
        {% set _query = app.request.query.all|merge({'pagenum': view.page - 1}) %}
        <li><a href="{{ url('homepage', _query) }}">&laquo;</a></li>
    {% endif %}
    {% for _page in 1..view.pages %}
        {% if view.page == _page %}
            <li class="active"><span>{{ _page|e }}</span></li>
        {% elseif (_page > view.page-m  and  _page < view.page+m) or ( _page > (view.pages-m) )  or  ( _page < _first+m ) %}
            {% set _query = app.request.query.all|merge({'pagenum': _page|e}) %}
            <li><a title="Открыть {{ _page|e }} страницу" href="{{ url('homepage', _query) }}">{{ _page|e }}</a></li>
        {% elseif (_page == view.page-m)  or ( _page == view.page+m) %}
            <li><span>...</span></li>
        {% endif %}
    {% endfor %}
    {% if _last %}
        <li class="disabled"><span>&raquo;</span></li>
    {% else %}
        {% set _query = app.request.query.all|merge({'pagenum': view.page + 1}) %}
        <li><a href="{{ url('homepage',_query) }}">&raquo;</a></li>
    {% endif %}
</ul>
{% endif %}